<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YALLA RIDE | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #00d2ff;
            --dark-bg: #0b0e11;
            --card-bg: #15191d;
            --text-color: #ffffff;
            --nav-bg: #1a1f24;
            --error-red: #ff4d4d;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }
        body { background-color: var(--dark-bg); color: var(--text-color); }

        /* Navigation */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 5%; background: var(--nav-bg); height: 80px;
            position: sticky; top: 0; z-index: 1000; border-bottom: 2px solid var(--primary-blue);
        }
        .logo-container { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .main-logo { height: 50px; width: auto; border-radius: 8px; }
        .logo-text { font-size: 22px; font-weight: 900; color: var(--primary-blue); }

        .nav-links { display: flex; gap: 15px; list-style: none; }
        .nav-links li a { color: white; text-decoration: none; font-size: 0.9rem; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .nav-links li a:hover, .nav-links li a.active { color: var(--primary-blue); }

        /* Page Layout */
        .page { display: none; padding: 40px 5%; min-height: calc(100vh - 80px); animation: fadeIn 0.3s ease-in-out; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* UI Components */
        .container-box { max-width: 600px; margin: auto; }
        .card { background: var(--card-bg); border-radius: 20px; padding: 30px; border: 1px solid #222; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { color: var(--primary-blue); margin-bottom: 20px; text-align: center; }

        /* Inputs & Buttons */
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: #aaa; }
        input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #333; background: #222; color: white; font-size: 1rem; }
        input:focus { border-color: var(--primary-blue); outline: none; }
        
        button { width: 100%; padding: 12px; border-radius: 10px; border: none; background: var(--primary-blue); color: #000; font-weight: 900; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,210,255,0.3); }
        .secondary-btn { background: transparent; border: 1px solid var(--primary-blue); color: var(--primary-blue); }

        /* Stats & Tables */
        .leaderboard-table { width: 100%; border-collapse: collapse; }
        .leaderboard-table th { color: var(--primary-blue); padding: 10px; border-bottom: 2px solid #333; text-align: right; }
        .leaderboard-table td { padding: 15px 10px; border-bottom: 1px solid #222; }
        .top-rank { color: gold; font-weight: bold; }

        /* Toast Notification */
        #toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--primary-blue); color: black; padding: 12px 25px; border-radius: 50px; font-weight: bold; display: none; z-index: 2000; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <div class="logo-container" onclick="showPage('home')">
        <img src="IMG_0660.PNG" alt="YALLA RIDE LOGO" class="main-logo" onerror="this.style.display='none'">
        <span class="logo-text">YALLA RIDE</span>
    </div>
    <ul class="nav-links">
        <li><a onclick="showPage('home')" id="link-home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
        <li><a onclick="showPage('leaderboard')">Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</a></li>
        <li><a onclick="showPage('rides')">Ø§Ù„Ø¬ÙˆÙ„Ø§Øª</a></li>
        <li id="nav-profile" class="hidden"><a onclick="showPage('profile')">Ù…Ù„ÙÙŠ</a></li>
        <li id="nav-login"><a onclick="showPage('login')">Ø¯Ø®ÙˆÙ„</a></li>
    </ul>
</nav>

<div id="home" class="page active">
    <div style="text-align: center; padding-top: 50px;">
        <h1 style="font-size: 3rem; color: var(--primary-blue);">KEEP ROLLING</h1>
        <h1 style="font-size: 3.5rem; letter-spacing: 5px;">YOUR WHEELS</h1>
        <p style="margin-top: 20px; color: #ccc;">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø£ÙƒØ¨Ø± Ù…Ø¬ØªÙ…Ø¹ Ù„Ù„Ø¯Ø±Ø§Ø¬ÙŠÙ†ØŒ Ø³Ø¬Ù„ Ù…Ø³Ø§ÙØ§ØªÙƒ ÙˆØªØ­Ø¯Ù‘Ù Ø£ØµØ¯Ù‚Ø§Ø¡Ùƒ.</p>
        <button onclick="showPage('login')" style="max-width: 200px; margin-top: 30px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<div id="login" class="page">
    <div class="container-box">
        <div class="card">
            <h2 id="auth-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <div id="register-fields" class="hidden">
                <div class="input-group">
                    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" id="reg-name" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯">
                </div>
            </div>
            <div class="input-group">
                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                <input type="email" id="auth-email" placeholder="name@example.com">
            </div>
            <div class="input-group">
                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (ÙƒÙˆØ¯ Ø§Ù„Ø­Ù…Ø§ÙŠØ©)</label>
                <input type="password" id="auth-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
            </div>
            <button onclick="handleAuth()" id="auth-btn">Ø¯Ø®ÙˆÙ„</button>
            <button onclick="toggleAuthMode()" class="secondary-btn" id="toggle-btn">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ù‡Ù†Ø§</button>
        </div>
    </div>
</div>

<div id="profile" class="page">
    <div class="container-box">
        <div class="card">
            <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ <span id="user-fullname" style="color: white;"></span> ğŸ‘‹</h2>
            <div style="background: #1e252b; padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px;">
                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©</p>
                <h1 style="color: var(--primary-blue);"><span id="user-total-dist">0</span> ÙƒÙ…</h1>
            </div>
            <div class="input-group">
                <label>Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¬Ø¯ÙŠØ¯ (ÙƒÙ…)</label>
                <input type="number" id="new-ride-val" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ©">
            </div>
            <button onclick="addDistance()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ©</button>
            <button onclick="logout()" style="background: var(--error-red); color: white; margin-top: 20px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>
</div>

<div id="leaderboard" class="page">
    <div class="container-box" style="max-width: 800px;">
        <div class="card">
            <h2>ğŸ† Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¨Ø·Ø§Ù„ YALLA RIDE</h2>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù…Ø±ÙƒØ²</th>
                        <th>Ø§Ù„Ø§Ø³Ù…</th>
                        <th>Ø§Ù„Ù…Ø³Ø§ÙØ©</th>
                    </tr>
                </thead>
                <tbody id="leader-rows"></tbody>
            </table>
        </div>
    </div>
</div>

<div id="rides" class="page">
    <div class="container-box">
        <h2>ğŸ“¢ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù†Ø©</h2>
        <div class="card" style="margin-bottom: 15px;">
            <h3 style="color: var(--primary-blue);">Ø¬ÙˆÙ„Ø© Ø³Ø§Ø­Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</h3>
            <p>Ø§Ù„Ù…Ø³Ø§ÙØ©: 35 ÙƒÙ… | Ø§Ù„ØªÙˆÙ‚ÙŠØª: Ø§Ù„Ø¬Ù…Ø¹Ø© 6:00 Øµ</p>
            <button class="secondary-btn" onclick="showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ†Ø¨ÙŠÙ‡ Ù„Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¹Ø¯!')">ØªÙ†Ø¨ÙŠÙ‡ÙŠ Ø¨Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
        </div>
    </div>
</div>

<div id="toast"></div>

<script>
    let users = JSON.parse(localStorage.getItem('yalla_ride_db')) || [];
    let currentUser = JSON.parse(sessionStorage.getItem('active_session')) || null;
    let isRegisterMode = false;

    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
        const activeLink = document.getElementById('link-' + pageId);
        if(activeLink) activeLink.classList.add('active');

        if(pageId === 'leaderboard') renderLeaderboard();
        if(pageId === 'profile') renderProfile();
        window.scrollTo(0,0);
    }

    function toggleAuthMode() {
        isRegisterMode = !isRegisterMode;
        document.getElementById('auth-title').innerText = isRegisterMode ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯' : 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
        document.getElementById('auth-btn').innerText = isRegisterMode ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨' : 'Ø¯Ø®ÙˆÙ„';
        document.getElementById('toggle-btn').innerText = isRegisterMode ? 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ù‡Ù†Ø§' : 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ù‡Ù†Ø§';
        document.getElementById('register-fields').classList.toggle('hidden');
    }

    function handleAuth() {
        const email = document.getElementById('auth-email').value;
        const pass = document.getElementById('auth-pass').value;
        const name = document.getElementById('reg-name').value;

        if(!email || !pass) return showToast("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒØ§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ„");

        if(isRegisterMode) {
            if(!name) return showToast("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ");
            if(users.find(u => u.email === email)) return showToast("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹");
            users.push({ name, email, pass, distance: 0 });
            saveDB();
            showToast("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
            toggleAuthMode();
        } else {
            const user = users.find(u => u.email === email && u.pass === pass);
            if(user) {
                currentUser = user;
                sessionStorage.setItem('active_session', JSON.stringify(currentUser));
                updateNav();
                showPage('profile');
            } else {
                showToast("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ ÙƒÙˆØ¯ Ø§Ù„Ø­Ù…Ø§ÙŠØ©");
            }
        }
    }

    function logout() {
        currentUser = null;
        sessionStorage.removeItem('active_session');
        updateNav();
        showPage('home');
    }

    function addDistance() {
        const val = parseFloat(document.getElementById('new-ride-val').value);
        if(val > 0) {
            currentUser.distance += val;
            const idx = users.findIndex(u => u.email === currentUser.email);
            users[idx].distance = currentUser.distance;
            saveDB();
            sessionStorage.setItem('active_session', JSON.stringify(currentUser));
            renderProfile();
            document.getElementById('new-ride-val').value = '';
            showToast(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ ${val} ÙƒÙ… Ø¨Ù†Ø¬Ø§Ø­`);
        }
    }

    function renderLeaderboard() {
        const sorted = [...users].sort((a,b) => b.distance - a.distance).slice(0, 10);
        const container = document.getElementById('leader-rows');
        container.innerHTML = sorted.map((u, i) => `
            <tr class="${i < 3 ? 'top-rank' : ''}">
                <td>${i+1}</td>
                <td>${u.name}</td>
                <td>${u.distance} ÙƒÙ…</td>
            </tr>
        `).join('');
    }

    function renderProfile() {
        if(!currentUser) return showPage('login');
        document.getElementById('user-fullname').innerText = currentUser.name;
        document.getElementById('user-total-dist').innerText = currentUser.distance;
    }

    function updateNav() {
        document.getElementById('nav-profile').classList.toggle('hidden', !currentUser);
        document.getElementById('nav-login').classList.toggle('hidden', !!currentUser);
    }

    function saveDB() { localStorage.setItem('yalla_ride_db', JSON.stringify(users)); }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg; t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 3000);
    }

    updateNav();
</script>

</body>
</html>
